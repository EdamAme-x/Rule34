{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/utils/randomInt.ts","./src/main.ts"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\r\nimport {\r\n  DomSanitizer,\r\n  SafeHtml,\r\n  SafeResourceUrl,\r\n} from \"@angular/platform-browser\";\r\nimport { randomInt } from \"./utils/randomInt\";\r\n\r\n@Component({\r\n  selector: \"app-root\",\r\n  templateUrl: \"./app.component.html\",\r\n  styleUrls: [\"./app.component.css\"],\r\n})\r\nexport class AppComponent implements OnInit {\r\n  title = \"rule34\";\r\n  imageUrl: Element | any = \"\";\r\n  id = \"\";\r\n  image: SafeHtml = \"\";\r\n  reloadInterval: number = 5000;\r\n\r\n  changeInterval(event: Event) {\r\n    this.reloadInterval = parseInt((event.target as HTMLInputElement).value);\r\n    localStorage.setItem(\"reloadInterval\", this.reloadInterval.toString());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.id = randomInt(1, 8000000).toString();\r\n    if (typeof window == \"undefined\") return;\r\n\r\n    if (!localStorage.getItem(\"reloadInterval\")) {\r\n      localStorage.setItem(\"reloadInterval\", \"5000\");\r\n    }\r\n\r\n    fetch(\"/image/\" + this.id)\r\n      .then((res) => res.text())\r\n      .then(async (text) => {\r\n        try {\r\n          const dom = new DOMParser()\r\n            .parseFromString(text, \"text/html\")\r\n            .querySelectorAll(\"img#image\")[0];\r\n\r\n          console.log(dom);\r\n\r\n          this.imageUrl = dom;\r\n        } catch (_e) {}\r\n\r\n        try {\r\n          this.imageUrl.getAttribute(\"src\");\r\n        } catch (_e) {\r\n          window.location.reload();\r\n        }\r\n\r\n        const resp = await fetch(\r\n          \"/get-image/\" + this.imageUrl.getAttribute(\"src\")\r\n        );\r\n\r\n        const imageBlob = await resp.blob(); // .blob()\r\n        const imageURL = URL.createObjectURL(imageBlob);\r\n        console.log(imageURL);\r\n\r\n        try {\r\n          this.image = this.sanitizer.bypassSecurityTrustHtml(\r\n            `\r\n            <a href=\"${this.imageUrl.getAttribute(\"src\")}\" target=\"_blank\">\r\n            ${\r\n              this.imageUrl.outerHTML\r\n                ? this.imageUrl.getAttribute(\"src\").split(\"//\")[2] // path\r\n                : \"\"\r\n            }\r\n            </a>\r\n            <img id=\"image\" src=\"${imageURL}\">`\r\n          );\r\n        } catch (_e) {\r\n          window.location.reload();\r\n        }\r\n\r\n        setTimeout(() => {\r\n          this.ngOnInit();\r\n        }, this.reloadInterval);\r\n      });\r\n  }\r\n\r\n  constructor(private sanitizer: DomSanitizer) {}\r\n}\r\n","<div class=\"container\" [innerHTML]=\"image\"></div>\r\n\r\n<div class=\"button\">\r\n  <input type=\"number\" (input)=\"changeInterval($event)\" [(ngModel)]=\"reloadInterval\" />\r\n</div>\r\n","import { NgModule } from \"@angular/core\";\r\nimport { BrowserModule } from \"@angular/platform-browser\";\r\n\r\nimport { AppComponent } from \"./app.component\";\r\nimport { FormsModule } from \"@angular/forms\";\r\n\r\n@NgModule({\r\n  declarations: [AppComponent],\r\n  imports: [BrowserModule, FormsModule],\r\n  providers: [],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule {}\r\n","export function randomInt(min: number, max: number) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\n\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"names":["randomInt","AppComponent","changeInterval","event","reloadInterval","parseInt","target","value","localStorage","setItem","toString","ngOnInit","_this","id","window","getItem","fetch","then","res","text","_ref","_asyncToGenerator","dom","DOMParser","parseFromString","querySelectorAll","console","log","imageUrl","_e","getAttribute","location","reload","resp","imageBlob","blob","imageURL","URL","createObjectURL","image","sanitizer","bypassSecurityTrustHtml","outerHTML","split","setTimeout","_x","apply","arguments","constructor","title","_","i0","ɵɵdirectiveInject","i1","DomSanitizer","_2","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","ɵɵelement","ɵɵelementStart","ɵɵlistener","AppComponent_Template_input_input_2_listener","$event","AppComponent_Template_input_ngModelChange_2_listener","ɵɵelementEnd","ɵɵproperty","ɵɵsanitizeHtml","ɵɵadvance","BrowserModule","FormsModule","AppModule","bootstrap","_3","declarations","imports","min","max","Math","floor","random","__NgCli_bootstrap_1","platformBrowser","bootstrapModule","catch","err","error"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}