{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/utils/randomInt.ts","./src/main.ts"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\r\nimport {\r\n  DomSanitizer,\r\n  SafeHtml,\r\n  SafeResourceUrl,\r\n} from \"@angular/platform-browser\";\r\nimport { randomInt } from \"./utils/randomInt\";\r\n\r\n@Component({\r\n  selector: \"app-root\",\r\n  templateUrl: \"./app.component.html\",\r\n  styleUrls: [\"./app.component.css\"],\r\n})\r\nexport class AppComponent implements OnInit {\r\n  title = \"rule34\";\r\n  imageUrl: Element | any = \"\";\r\n  id = \"\";\r\n  image: SafeHtml = \"\";\r\n  reloadInterval: number = 5000;\r\n\r\n  changeInterval(event: Event) {\r\n    this.reloadInterval = parseInt((event.target as HTMLInputElement).value);\r\n    localStorage.setItem(\"reloadInterval\", this.reloadInterval.toString());\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.id = randomInt(1, 8000000).toString();\r\n    if (typeof window == \"undefined\") return;\r\n\r\n    if (!localStorage.getItem(\"reloadInterval\")) {\r\n      localStorage.setItem(\"reloadInterval\", \"5000\");\r\n    }\r\n\r\n    fetch(\"/image/\" + this.id)\r\n      .then((res) => res.text())\r\n      .then((text) => {\r\n        try {\r\n          const dom = new DOMParser()\r\n            .parseFromString(text, \"text/html\")\r\n            .querySelectorAll(\"img#image\")[0];\r\n\r\n          console.log(dom);\r\n\r\n          this.imageUrl = dom;\r\n        } catch (_e) {}\r\n\r\n        if (typeof this.imageUrl === null) {\r\n          window.location.reload();\r\n        }\r\n\r\n        try {\r\n          this.image = this.sanitizer.bypassSecurityTrustHtml(\r\n            `\r\n            <a href=\"${this.imageUrl.getAttribute(\"src\")}\" target=\"_blank\">\r\n            ${\r\n              this.imageUrl.outerHTML\r\n                ? this.imageUrl.getAttribute(\"src\").split(\"//\")[2]\r\n                : \"\"\r\n            }\r\n            </a>`\r\n          );\r\n        } catch (_e) {\r\n          window.location.reload();\r\n        }\r\n\r\n        setTimeout(() => {\r\n          this.ngOnInit();\r\n        }, this.reloadInterval);\r\n      });\r\n  }\r\n\r\n  constructor(private sanitizer: DomSanitizer) {}\r\n}\r\n","<div class=\"container\" [innerHTML]=\"image\"></div>\r\n\r\n<div class=\"button\">\r\n  <input type=\"number\" (input)=\"changeInterval($event)\" [(ngModel)]=\"reloadInterval\" />\r\n</div>\r\n","import { NgModule } from \"@angular/core\";\r\nimport { BrowserModule } from \"@angular/platform-browser\";\r\n\r\nimport { AppComponent } from \"./app.component\";\r\nimport { FormsModule } from \"@angular/forms\";\r\n\r\n@NgModule({\r\n  declarations: [AppComponent],\r\n  imports: [BrowserModule, FormsModule],\r\n  providers: [],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule {}\r\n","export function randomInt(min: number, max: number) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\n\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"names":["randomInt","AppComponent","changeInterval","event","reloadInterval","parseInt","target","value","localStorage","setItem","toString","ngOnInit","id","window","getItem","fetch","then","res","text","dom","DOMParser","parseFromString","querySelectorAll","console","log","imageUrl","_e","location","reload","image","sanitizer","bypassSecurityTrustHtml","getAttribute","outerHTML","split","setTimeout","constructor","title","_","i0","ɵɵdirectiveInject","i1","DomSanitizer","_2","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","ɵɵelement","ɵɵelementStart","ɵɵlistener","AppComponent_Template_input_input_2_listener","$event","AppComponent_Template_input_ngModelChange_2_listener","ɵɵelementEnd","ɵɵproperty","ɵɵsanitizeHtml","ɵɵadvance","BrowserModule","FormsModule","AppModule","bootstrap","_3","declarations","imports","min","max","Math","floor","random","__NgCli_bootstrap_1","platformBrowser","bootstrapModule","catch","err","error"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}